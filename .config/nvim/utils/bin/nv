#!/bin/bash

GLOBAL=1

source /opt/nvcode/nvim/utils/bin/nvcode-env.sh

export LV_BASE=${NVCODE_BASE}

/usr/local/bin/nvim -u ${NVCODE_BASE_CONFIG} ${NVCODE_SYNC} $@

if [ -v NVCODE_SYNC ]; then
  touch ${NVCODE_USER}/.packer_sync
fi

if [ -v NVCODE_CONFIG_INIT ]; then
  mkdir -p ${NVCODE_USER_CONFIG}
  cp ${NVCODE_CONFIG_DIR}/lv-config.lua ${NVCODE_USER_CONFIG}/nvim/lv-config.lua
  touch ${NVCODE_USER_CONFIG}/nvim/init.lua
fi
